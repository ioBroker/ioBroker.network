(this["webpackJsonpnetwork-admin"]=this["webpackJsonpnetwork-admin"]||[]).push([[0],{139:function(e){e.exports=JSON.parse('{"a":"0.1.0"}')},161:function(e,t,s){},210:function(e){e.exports=JSON.parse('{"Options":"Options","Objects":"Objects","URL Server":"Server URL","Server":"Server","Send interval":"Send interval","seconds":"seconds","De-bounces":"De-bounces","debounce":"de-bounce","ms":"ms"}')},211:function(e){e.exports=JSON.parse('{"Options":"Optionen","Objects":"Objekte","URL Server":"Server-URL","Server":"Server","Send interval":"Sendeintervall","seconds":"Sekunden","De-bounces":"De-Bounces","debounce":"abprallen","ms":"ms"}')},212:function(e){e.exports=JSON.parse('{"Options":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b","Objects":"\u041e\u0431\u044a\u0435\u043a\u0442\u044b","URL Server":"URL-\u0430\u0434\u0440\u0435\u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","Server":"\u0421\u0435\u0440\u0432\u0435\u0440","Send interval":"\u0418\u043d\u0442\u0435\u0440\u0432\u0430\u043b \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438","seconds":"\u0441\u0435\u043a\u0443\u043d\u0434\u044b","De-bounces":"De-bounces","debounce":"\u0443\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0434\u0440\u0435\u0431\u0435\u0437\u0433\u0430","ms":"\u043c\u0441"}')},213:function(e){e.exports=JSON.parse('{"Options":"Op\xe7\xf5es","Objects":"Objetos","URL Server":"URL do servidor","Server":"Servidor","Send interval":"Intervalo de envio","seconds":"segundos","De-bounces":"De-bounces","debounce":"de-salto","ms":"ms"}')},214:function(e){e.exports=JSON.parse('{"Options":"Opties","Objects":"Voorwerpen","URL Server":"Server-URL","Server":"Server","Send interval":"Verzend interval","seconds":"seconden","De-bounces":"De-bounces","debounce":"de-bounce","ms":"ms"}')},215:function(e){e.exports=JSON.parse('{"Options":"Options","Objects":"Objets","URL Server":"URL du serveur","Server":"Serveur","Send interval":"Intervalle d\'envoi","seconds":"secondes","De-bounces":"De-rebondit","debounce":"rebondir","ms":"ms"}')},216:function(e){e.exports=JSON.parse('{"Options":"Opzioni","Objects":"Oggetti","URL Server":"URL del server","Server":"server","Send interval":"Invia intervallo","seconds":"secondi","De-bounces":"De-bounces","debounce":"de-rimbalzo","ms":"ms"}')},217:function(e){e.exports=JSON.parse('{"Options":"Opciones","Objects":"Objetos","URL Server":"URL del servidor","Server":"Servidor","Send interval":"Intervalo de env\xedo","seconds":"segundos","De-bounces":"De-bounces","debounce":"rebote","ms":"ms"}')},218:function(e){e.exports=JSON.parse('{"Options":"Opcje","Objects":"Obiekty","URL Server":"URL serwera","Server":"serwer","Send interval":"Interwa\u0142 wysy\u0142ania","seconds":"sekundy","De-bounces":"De-bounces","debounce":"Obali\u0107","ms":"ms"}')},219:function(e){e.exports=JSON.parse('{"Options":"\u9009\u4ef6","Objects":"\u5bf9\u8c61","URL Server":"\u670d\u52a1\u5668\u7f51\u5740","Server":"\u670d\u52a1\u5668","Send interval":"\u53d1\u9001\u95f4\u9694","seconds":"\u79d2","De-bounces":"\u53bb\u5f39\u8df3","debounce":"\u53bb\u6296\u52a8","ms":"ms"}')},220:function(e,t,s){"use strict";s.r(t);s(0);var n=s(13),a=s.n(n),i=s(255),r=s(82),o=(s(161),s(94)),c=s.n(o),d=s(95),h=s.n(d),l=s(5),b=s(263),j=s(266),p=s(264),u=s(130),O=s.n(u),v=s(96),f=s.n(v),g=s(14),S=s.n(g),w=s(137),m=s.n(w),x=s(138),D=s.n(x),C=s(135),k=s.n(C),I=s(136),N=s.n(I),y=s(134),P=s.n(y),J=s(133),R=s.n(J),L=s(124),T=s(117),U=s(116),F=s(265),W=s(115),q=s(114),z=s(260),B=s(261),E=s(268),$=s(119),A=s(262),V=s(7);const G=(e,t)=>{let s;const n=e.match(/^([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)$/);return n?(s=!n.slice(1).map((e=>parseInt(e)>=0&&parseInt(e)<=255)).includes(!1),t&&s&&(s=(parseInt(n[1])*256**3+65536*parseInt(n[2])+256*parseInt(n[3])+parseInt(n[4])).toString(2).match(/^1+0+$/))):s=!1,s};class H extends O.a{constructor(e){const t={};t.translations={en:s(210),de:s(211),ru:s(212),pt:s(213),nl:s(214),fr:s(215),it:s(216),es:s(217),pl:s(218),"zh-cn":s(219)},t.doNotLoadAllObjects=!0,t.adapterName="network",super(e,t),this.setInterfaceParam=(e,t,s)=>{const n=JSON.parse(JSON.stringify(this.state.interfacesChanged));n[e][t]=s,this.setState({interfacesChanged:n})},this.setDns=(e,t,s)=>{const n=JSON.parse(JSON.stringify(this.state.interfacesChanged));n[e].dns[t]=s,this.setState({interfacesChanged:n})},this.addDns=e=>{const t=JSON.parse(JSON.stringify(this.state.interfacesChanged));t[e].dns.push(""),this.setState({interfacesChanged:t})},this.removeDns=(e,t)=>{const s=JSON.parse(JSON.stringify(this.state.interfacesChanged));s[e].dns.splice(t,1),this.setState({interfacesChanged:s})},this.sendData=(e,t)=>{this.socket.sendTo("network."+this.instance,"changeInterface",{rootPassword:t,data:this.state.interfacesChanged[e]}).then((e=>{e?(this.props.enqueueSnackbar(S.a.t("Interface updated"),{variant:"success"}),this.refresh()):this.props.enqueueSnackbar(S.a.t("Interface not updated"),{variant:"error"})})),window.location.hostname===this.state.interfaces[e].ip4&&this.state.interfacesChanged[e].ip4!==this.state.interfaces[e].ip4&&(window.location.href="http://".concat(this.state.interfacesChanged[e].ip4,":").concat(window.location.port))},this.connect=(e,t)=>{this.socket.sendTo("network."+this.instance,"wifiConnect",{ssid:e,password:t}).then((t=>{t.result?(this.props.enqueueSnackbar("".concat(e," ").concat(S.a.t("connected")),{variant:"success"}),this.refresh()):this.props.enqueueSnackbar(JSON.stringify(t.error),{variant:"error"})}))},this.disconnect=()=>{this.socket.sendTo("network."+this.instance,"wifiDisconnect",null).then((e=>{e.result?(this.props.enqueueSnackbar(S.a.t("Wi-fi disconnected"),{variant:"success"}),this.refresh()):this.props.enqueueSnackbar(JSON.stringify(e.error),{variant:"error"})}))},this.state={interfaces:[],interfacesChanged:[],wifi:[],dns:[],wifiConnections:[],sudoDialog:!1,sudoDialogPassword:"",wifiDialog:!1,wifiDialogPassword:""}}onConnectionReady(){this.refresh(),setInterval((()=>{this.socket.sendTo("network."+this.instance,"wifi",null).then((e=>(e.length&&this.setState({wifi:e}),this.socket.sendTo("network."+this.instance,"wifiConnections",null)))).then((e=>this.setState({wifiConnections:e})))}),4e3)}refresh(){this.socket.sendTo("network."+this.instance,"interfaces",null).then((e=>(e.sort(((e,t)=>e.mac>t.mac?-1:1)),e.sort(((e,t)=>"wired"===e.type?-1:1)),e.sort(((e,t)=>e.virtual?1:-1)),e=(e=e.filter((e=>"127.0.0.1"!==e.ip4))).map((e=>("string"===typeof e.dhcp&&(e.dhcp=JSON.parse(e.dhcp)),e))),this.setState({interfaces:e,interfacesChanged:JSON.parse(JSON.stringify(e))}),this.socket.sendTo("network."+this.instance,"wifi",null)))).then((e=>(this.setState({wifi:e}),this.socket.sendTo("network."+this.instance,"dns",null)))).then((e=>(this.setState({dns:e}),this.socket.sendTo("network."+this.instance,"wifiConnections",null)))).then((e=>this.setState({wifiConnections:e})))}getSelectedTab(){return this.state.selectedTab?this.state.selectedTab:0}renderRootDialog(){return Object(V.jsxs)(L.a,{open:!1!==this.state.sudoDialog,onClose:()=>this.setState({sudoDialog:!1,sudoDialogPassword:""}),children:[Object(V.jsx)(T.a,{children:S.a.t("Enter sudo password")}),Object(V.jsx)(U.a,{children:Object(V.jsx)(F.a,{value:this.state.sudoDialogPassword,onChange:e=>this.setState({sudoDialogPassword:e.target.value}),type:"password"})}),Object(V.jsxs)(W.a,{children:[Object(V.jsx)(q.a,{variant:"contained",onClick:()=>this.setState({sudoDialog:!1,sudoDialogPassword:""}),children:S.a.t("Cancel")}),Object(V.jsx)(q.a,{variant:"contained",color:"primary",onClick:()=>{this.sendData(this.state.sudoDialog,this.state.sudoDialogPassword),this.setState({sudoDialog:!1,sudoDialogPassword:""})},children:S.a.t("Send")})]})]})}renderWifiDialog(){return Object(V.jsxs)(L.a,{open:!1!==this.state.wifiDialog,onClose:()=>this.setState({wifiDialog:!1,wifiDialogPassword:""}),children:[Object(V.jsx)(T.a,{children:S.a.t("Enter wifi password")}),Object(V.jsx)(U.a,{children:Object(V.jsx)(F.a,{value:this.state.wifiDialogPassword,onChange:e=>this.setState({wifiDialogPassword:e.target.value}),type:"password"})}),Object(V.jsxs)(W.a,{children:[Object(V.jsx)(q.a,{variant:"contained",onClick:()=>this.setState({wifiDialog:!1,wifiDialogPassword:""}),children:S.a.t("Cancel")}),Object(V.jsx)(q.a,{variant:"contained",color:"primary",onClick:()=>{this.connect(this.state.wifiDialog,this.state.wifiDialogPassword),this.setState({wifiDialog:!1,wifiDialogPassword:""})},children:S.a.t("Send")})]})]})}renderInterface(e,t){let s=!1;return e.dhcp||(s=!G(e.ip4)||!G(e.ip4subnet,!0)),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(z.a,{container:!0,children:[Object(V.jsxs)(z.a,{item:!0,children:[Object(V.jsx)("div",{children:Object(V.jsx)(B.a,{control:Object(V.jsx)(E.a,{checked:e.dhcp,onChange:e=>this.setInterfaceParam(t,"dhcp",e.target.checked)}),label:S.a.t("DHCP")})}),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("h4",{children:"IPv4"}),Object(V.jsx)("div",{children:Object(V.jsx)(F.a,{value:e.ip4,label:S.a.t("IPv4"),onChange:e=>this.setInterfaceParam(t,"ip4",e.target.value),disabled:e.dhcp})}),Object(V.jsx)("div",{children:Object(V.jsx)(F.a,{value:e.ip4subnet,label:S.a.t("IPv4 netmask"),onChange:e=>this.setInterfaceParam(t,"ip4subnet",e.target.value),disabled:e.dhcp})}),Object(V.jsx)("div",{children:Object(V.jsx)(F.a,{value:e.gateway,label:S.a.t("Gateway"),onChange:e=>this.setInterfaceParam(t,"gateway",e.target.value),disabled:e.dhcp})}),Object(V.jsx)("h4",{children:"IPv6"}),Object(V.jsx)("div",{children:Object(V.jsx)(F.a,{value:e.ip6,label:S.a.t("IPv6"),onChange:e=>this.setInterfaceParam(t,"ip6",e.target.value),disabled:e.dhcp})}),Object(V.jsx)("div",{children:Object(V.jsx)(F.a,{value:e.ip6subnet,label:S.a.t("IPv6 netmask"),onChange:e=>this.setInterfaceParam(t,"ip6subnet",e.target.value),disabled:e.dhcp})}),Object(V.jsx)("h4",{children:"DNS"})]}),e.dns&&e.dns.map(((s,n)=>Object(V.jsxs)("div",{children:[Object(V.jsx)(F.a,{value:s,label:S.a.t("DNS record"),onChange:e=>this.setDns(t,n,e.target.value)}),e.dns&&e.dns.length>1?Object(V.jsx)($.a,{onClick:()=>this.removeDns(t,n),children:Object(V.jsx)(R.a,{})}):null]},n))),Object(V.jsx)("div",{children:Object(V.jsx)($.a,{onClick:()=>this.addDns(t),children:Object(V.jsx)(P.a,{})})}),Object(V.jsx)("div",{children:Object(V.jsx)(q.a,{variant:"contained",color:"primary",disabled:s,onClick:()=>this.sendData(t,""),children:S.a.t("Save")})})]}),"wired"===e.type?null:Object(V.jsx)(z.a,{item:!0,children:this.renderWifi()})]}),Object(V.jsx)("pre",{})]})}renderWifi(){return this.state.wifi.map(((e,t)=>{const s=this.state.wifiConnections.length&&e.ssid===this.state.wifiConnections[0].ssid;return Object(V.jsxs)("div",{children:[Object(V.jsxs)(q.a,{variant:s?"contained":void 0,color:s?"primary":void 0,disabled:s,onClick:()=>{e.security.includes("Open")?this.connect(e.ssid,""):this.setState({wifiDialog:e.ssid})},children:[e.security.includes("Open")?Object(V.jsx)(k.a,{}):Object(V.jsx)(N.a,{}),e.ssid]})," ",s?Object(V.jsx)(V.Fragment,{children:Object(V.jsx)(q.a,{onClick:this.disconnect,children:S.a.t("Disconnect")})}):""]},t)}))}render(){return this.state.loaded&&this.state.interfaces.length?Object(V.jsx)(i.a,{theme:this.state.theme,children:Object(V.jsx)("div",{className:"App",style:{background:"dark"===this.state.themeType?"#000":"#FFF"},children:Object(V.jsxs)(A.a,{children:[Object(V.jsx)(b.a,{position:"static",children:Object(V.jsx)(j.a,{value:this.getSelectedTab(),onChange:(e,t)=>this.selectTab(t,t),variant:"scrollable",children:this.state.interfaces.map(((e,t)=>Object(V.jsx)(p.a,{label:Object(V.jsxs)("div",{className:this.props.classes.tabContainer,children:["wired"===e.type?Object(V.jsx)(m.a,{}):Object(V.jsx)(D.a,{}),e.iface]})},t)))})}),Object(V.jsx)("div",{className:this.isIFrame?this.props.classes.tabContentIFrame:this.props.classes.tabContent,children:this.renderInterface(this.state.interfacesChanged[this.getSelectedTab()],this.getSelectedTab())}),this.renderRootDialog(),this.renderWifiDialog()]})})}):Object(V.jsx)(i.a,{theme:this.state.theme,children:Object(V.jsx)(f.a,{theme:this.state.themeType})})}}var K=Object(r.b)(Object(l.a)((()=>({root:{},tabContent:{padding:10,overflow:"auto"},tabContentIFrame:{padding:10,overflow:"auto"},tabContainer:{display:"flex"}})))(H));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var M=s(139);window.adapterName="network";let Q=h.a.getThemeName();console.log("iobroker.".concat(window.adapterName,"@").concat(M.a,' using theme "').concat(Q,'"')),function e(){return a.a.render(Object(V.jsx)(i.a,{theme:c()(Q),children:Object(V.jsx)(r.a,{children:Object(V.jsx)(K,{common:{},onThemeChange:t=>{Q=t,e()}})})}),document.getElementById("root"))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))}},[[220,1,2]]]);
//# sourceMappingURL=main.24f2ae74.chunk.js.map